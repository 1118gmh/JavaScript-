### js中的同步和异步机制

1. 单线程

   > 在同一个时间有多个任务的话，这些任务会进行排队，前一个任务执行完，才会执行下一个任务
   
2. 任务队列

   > “任务队列”是一个事件的队列；IO设备完成某项任务时，就在“任务队列”中添加一个事件，在主线程执行完执行栈中的同步任务后，读取“任务队列”中的事件，进入主线程执行。
   >
   > 任务队列中的事件，除了IO设备的事件外，还包括一些用户产生的事件（比如鼠标点击、页面滚动等）。只要指定过回调函数，这些事件发生时就会进入任务队列，等待主线程的读取。

3. 同步任务

   > 指在主线程上排队执行的任务；只有前一个任务执行完，才会执行下一个任务。

4. 异步任务

   > 指不进入主进程，而进入任务队列的任务；只有任务队列通知主线程，某个异步任务可以执行了，该任务才会进入主线程

5. 异步机制

   > - 所有的同步任务在主线程上执行，形成一个执行栈
   > - 主线程外，还存在一个任务队列，只要异步任务有了结果，就会在任务队列中放置一个事件
   > - 一旦执行栈中所有同步任务执行完毕，系统就会读取任务队列，看看里面还有哪些事件，那些对应的异步任务于是结束等待状态，进入执行栈，开始执行。
   > - 主线程不断重复上面的第三个步骤。

### js中的事件循环

> **任务队列**
>
> "任务队列"是一个事件的队列（也可以理解成消息的队列），IO设备完成一项任务，就在"任务队列"中添加一个事件，表示相关的异步任务可以进入"执行栈"了。主线程读取"任务队列"，就是读取里面有哪些事件。
>
> 任务队列是一个先进先出的数据结构，排在前面的事件，优先被主线程读取。主线程读取过程基本上是自动的，只要执行栈一清空，“任务对垒”上的第一位花四溅就会自动进入主线程。但是由于“定时器”的功能，主线程要检查一下执行时间，某些时间只有到了规定的时间，才能返回主线程。
>
> **事件**
>
> "任务队列"中的事件，除了IO设备的事件以外，还包括一些用户产生的事件（比如鼠标点击、页面滚动等等），此外，还有定时事件。只要指定过回调函数，这些事件发生时就会进入"任务队列"，等待主线程读取。
>
> **回调函数callback**
>
> 指那些会被主线程挂起来的代码。异步任务必须指定回调函数，当主线程开始执行异步任务是，就是执行对应的回调函数。
>
> **事件循环**
>
> 主线程从“任务队列”中读取事件，这个过程是不断循环的，所以整个的这种机制又称为Event Loop（事件循环）。
>
> ![事件循环机制](D:\js学习\js高级\img\事件循环机制.png)
>
> 主线程在运行的时候产生堆heap和栈stack，栈中的代码调用各种外部API，它们在“任务队列”中加入各种事件（click，load，done）。只要栈中的代码执行完毕，主线程就会去读取“任务队列”，依次执行那些事件所对应的回调函数。



































